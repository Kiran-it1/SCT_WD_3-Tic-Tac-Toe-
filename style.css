:root{
  --bg:#0a0e1a;
  --ink:#ffffff;
  --muted:#dfe9ff;
  --neon1:#39c2ff;
  --neon2:#ff7be6;
  --neon3:#ffe36e;
  --card:#10162a;
  --glow: drop-shadow(0 0 12px rgba(57,194,255,.65));
}

*{ box-sizing:border-box; }

html,body{ height:100%; }

body{
  margin:0;
  background: radial-gradient(1100px 800px at 20% -20%, rgba(57,194,255,.15), transparent 60%),
              radial-gradient(900px 700px at 120% 0%, rgba(255,123,230,.15), transparent 60%),
              linear-gradient(180deg, #070a14 0%, #0a0e1a 100%);
  color:var(--ink);
  font-family:"Inter", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  overflow:hidden;
}

canvas#bgFX{
  position:fixed; inset:0; z-index:0; pointer-events:none;
}

.app{ position:relative; z-index:1; display:flex; flex-direction:column; height:100dvh; }

.topbar{
  display:flex; align-items:center; gap:.75rem;
  padding:14px 18px;
  background:linear-gradient(180deg, rgba(255,255,255,.02), rgba(255,255,255,0));
  border-bottom:1px solid rgba(255,255,255,.06);
  backdrop-filter: blur(10px);
}

.title{
  font-family:"Orbitron", sans-serif;
  letter-spacing:.12em;
  font-weight:800;
  color:#fff;
  text-shadow:0 0 10px rgba(57,194,255,.6), 0 0 25px rgba(255,123,230,.35);
}

.spacer{ flex:1; }

.hidden{ display:none !important; }

.btn{
  border:none; cursor:pointer; user-select:none;
  padding:12px 18px; border-radius:16px; font-weight:700;
  letter-spacing:.04em; transition:transform .12s ease, box-shadow .2s ease, background .2s ease;
  box-shadow: 0 0 0 1px rgba(255,255,255,.09) inset, 0 8px 22px rgba(0,0,0,.35);
  background:linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.02));
  color:#fff;
}

.btn:hover{ transform:translateY(-1px) scale(1.01); }

.btn:active{ transform:translateY(0); }

.btn.primary{
  background: radial-gradient(120% 120% at 0% 0%, rgba(57,194,255,.25), transparent 50%), linear-gradient(180deg, rgba(57,194,255,.25), rgba(57,194,255,.10));
  filter: var(--glow);
  border:1px solid rgba(57,194,255,.45);
}

.btn.secondary{
  background: radial-gradient(120% 120% at 100% 0%, rgba(255,123,230,.25), transparent 50%), linear-gradient(180deg, rgba(255,123,230,.25), rgba(255,123,230,.10));
  border:1px solid rgba(255,123,230,.45);
  filter: drop-shadow(0 0 10px rgba(255,123,230,.6));
}

.btn.ghost{
  background:transparent;
  border:1px solid rgba(255,255,255,.18);
  color:#fff;
}

.pulse{ animation:pulse 1.3s ease-in-out infinite; }

@keyframes pulse{
  0%,100%{ box-shadow:0 0 0 0 rgba(57,194,255,.55); }
  50%{ box-shadow:0 0 20px 10px rgba(57,194,255,.15); }
}

.panel{ position:relative; flex:1; display:grid; place-items:center; padding:16px; }

.step{
  width:min(980px, 92vw); max-width:980px; min-height:68vh;
  border-radius:26px; padding:28px;
  background: radial-gradient(120% 120% at 20% 0%, rgba(57,194,255,.08), transparent 60%), radial-gradient(100% 120% at 100% 0%, rgba(255,123,230,.08), transparent 60%), linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.02));
  border:1px solid rgba(255,255,255,.12);
  box-shadow: 0 30px 60px rgba(0,0,0,.5);
  display:none;
  animation:fadeIn .35s ease;
}

.step.active{ display:block; }

@keyframes fadeIn{ from{ opacity:0; transform:translateY(6px) scale(.995);} to{ opacity:1; transform:none;} }

.neon-h1{
  font-family:"Orbitron", sans-serif; font-weight:800; letter-spacing:.1em;
  text-align:center; margin:16px 0 10px; font-size:clamp(28px, 5vw, 48px);
  color:#fff;
  text-shadow:0 0 12px rgba(57,194,255,.65), 0 0 28px rgba(255,123,230,.45);
}

.sub{ text-align:center; color:#fff; margin:0 auto 22px; max-width:720px; }

.neon{ font-family:"Orbitron", sans-serif; letter-spacing:.08em; color:#fff; text-shadow:0 0 12px rgba(57,194,255,.6); }

.hero{ display:grid; place-items:center; gap:16px; padding:16px; }

.logo-grid{
  display:grid; grid-template-columns:repeat(3, 64px); gap:14px; filter:var(--glow);
}

.logo.xo{
  width:64px; height:64px; border-radius:16px;
  background:linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,.02));
  display:grid; place-items:center; position:relative; overflow:hidden;
  border:1px solid rgba(255,255,255,.08);
}

.logo.x::before, .logo.o::before{
  content:""; position:absolute; inset:12px;
  border:6px solid var(--neon1); border-radius:10px;
  box-shadow: 0 0 18px rgba(57,194,255,.75), inset 0 0 12px rgba(57,194,255,.45);
}

.logo.o::before{
  border-radius:50%; border-color:var(--neon2);
  box-shadow: 0 0 18px rgba(255,123,230,.75), inset 0 0 12px rgba(255,123,230,.45);
}

.cards{ display:grid; grid-template-columns:repeat(auto-fit,minmax(220px,1fr)); gap:16px; margin-top:10px; }

.card{
  text-align:center; padding:22px; border-radius:22px; cursor:pointer;
  background:linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,.03));
  border:1px solid rgba(255,255,255,.14);
  box-shadow:0 10px 30px rgba(0,0,0,.45), 0 0 0 1px rgba(57,194,255,.15) inset;
  transition:transform .2s ease, box-shadow .2s ease, border-color .2s ease;
}

.card:hover{ transform:translateY(-4px); border-color:rgba(57,194,255,.45); box-shadow:0 16px 40px rgba(57,194,255,.18); }

.card-emoji{ font-size:42px; margin-bottom:10px; }

.card-title{ font-weight:800; letter-spacing:.06em; margin-bottom:6px; color:#fff; }

.card-sub{ color:#fff; }

.size-picker{ display:grid; gap:12px; justify-items:stretch; margin:10px 0 8px; }

.grid-2-then-1{ grid-template-columns:repeat(2,minmax(140px,1fr)); }

.grid-2-then-1 .span2{ grid-column:1 / -1; }

.grid-2-then-1 .center{ justify-self:center; width:min(100%, 220px); }

.difficulty{ display:flex; flex-wrap:wrap; gap:12px; justify-content:center; margin:10px 0 8px; }

.grid-2x2{ display:grid; grid-template-columns:repeat(2,minmax(160px,1fr)); gap:12px; }

.chip{
  padding:12px 16px; border-radius:14px; cursor:pointer; border:1px solid rgba(255,255,255,.28);
  background:linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.04));
  font-weight:800; color:#fff; letter-spacing:.04em;
  transition:transform .15s ease, border-color .2s ease, box-shadow .2s ease;
}

.chip:hover{ transform:translateY(-2px); border-color:rgba(255,255,255,.45); box-shadow:0 10px 26px rgba(255,123,230,.2); }

.hint, .size-note{ text-align:center; color:#fff; }

.hud{
  display:grid; grid-template-columns:1fr auto 1fr; align-items:center; gap:10px; margin-bottom:14px;
}

.versus{ display:flex; align-items:center; gap:12px; }

.badge{
  width:42px; height:42px; border-radius:14px; display:grid; place-items:center; font-weight:900; color:#fff;
  background:linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.02));
  border:1px solid rgba(255,255,255,.12);
  filter:var(--glow);
}

.vs{ color:#fff; font-weight:800; letter-spacing:.2em; text-transform:uppercase; }

.status{ text-align:center; }

.turn{ font-weight:800; letter-spacing:.08em; color:#fff; text-shadow:0 0 10px rgba(255,227,110,.6); }

.diff-tag{ color:#fff; font-size:.9rem; }

.scoreboard{ display:flex; justify-content:flex-end; gap:12px; flex-wrap:wrap; }

.score{
  padding:8px 12px; border-radius:14px; background:linear-gradient(180deg, rgba(255,255,255,.03), rgba(255,255,255,.02));
  border:1px solid rgba(255,255,255,.12);
}

.score-label{ color:#fff; margin-right:6px; }

.score-value{ font-weight:900; color:#fff; }

.board{
  --n:3;
  display:grid; grid-template-columns:repeat(var(--n), 1fr);
  gap:12px; width:min(84vw, 460px); aspect-ratio:1/1;
  margin:0 auto 16px; padding:14px; border-radius:26px;
  background: radial-gradient(100% 120% at 0% 0%, rgba(57,194,255,.06), transparent 60%), radial-gradient(100% 100% at 100% 0%, rgba(255,123,230,.06), transparent 60%), linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,.03));
  border:1px solid rgba(255,255,255,.15);
  box-shadow: inset 0 0 0 2px rgba(57,194,255,.10), 0 30px 60px rgba(0,0,0,.5);
}

.cell{
  position:relative; border-radius:18px; cursor:pointer;
  display:grid; place-items:center; font-weight:900; font-size:clamp(26px, 6vw, 52px);
  color:#fff; letter-spacing:.08em;
  background:linear-gradient(180deg, rgba(255,255,255,.03), rgba(255,255,255,.02));
  border:1px solid rgba(255,255,255,.12);
  transition:transform .12s ease, box-shadow .25s ease, border-color .25s ease;
}

.cell:hover{ transform:translateY(-2px); border-color:rgba(255,255,255,.28); box-shadow:0 14px 30px rgba(57,194,255,.20); }

.cell.disabled{ cursor:not-allowed; opacity:.75; }

.cell::after{
  content:""; position:absolute; inset:10%; border-radius:12px; opacity:0; transition:opacity .25s ease;
  box-shadow:0 0 16px rgba(57,194,255,.55), inset 0 0 10px rgba(255,123,230,.35);
}

.cell.played::after{ opacity:1; }

.cell .mark{ display:block; width:68%; height:68%; filter:drop-shadow(0 0 10px rgba(255,255,255,.4)); }

.mark.x{ border:6px solid transparent; position:relative; }

.mark.x::before, .mark.x::after{
  content:""; position:absolute; left:50%; top:50%; width:6px; height:100%;
  background:linear-gradient(180deg, var(--neon1), rgba(57,194,255,.2));
  transform-origin:center; border-radius:4px; filter:drop-shadow(0 0 10px rgba(57,194,255,.6));
}

.mark.x::before{ transform:translate(-50%,-50%) rotate(45deg); }

.mark.x::after{ transform:translate(-50%,-50%) rotate(-45deg); }

.mark.o{
  border:6px solid var(--neon2); border-radius:50%;
  box-shadow:0 0 18px rgba(255,123,230,.65), inset 0 0 10px rgba(255,123,230,.35);
}

.win-line{ position:absolute; inset:0; pointer-events:none; }

.win-line .bar{
  position:absolute; height:6px; border-radius:6px;
  background:linear-gradient(90deg, var(--neon3), rgba(57,194,255,.9));
  box-shadow:0 0 20px rgba(255,227,110,.65), 0 0 34px rgba(57,194,255,.45);
  transform-origin:left center; animation:grow 500ms ease forwards;
}

@keyframes grow{ from{ transform:scaleX(0); } to{ transform:scaleX(1); } }

.game-actions{ display:flex; justify-content:center; gap:12px; }

.modal{ position:fixed; inset:0; background:rgba(10,14,26,.55); display:grid; place-items:center; z-index:3; }

.modal.hidden{ display:none; }

.modal-card{
  width:min(520px, 92vw); text-align:center; padding:26px 22px; border-radius:26px;
  background:linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
  border:1px solid rgba(255,255,255,.12);
  box-shadow:0 30px 60px rgba(0,0,0,.6);
  color:#fff;
}

.result-icon{ font-size:48px; margin-bottom:6px; }

.result-text{ font-family:"Orbitron"; font-size:28px; letter-spacing:.12em; margin-bottom:14px; color:#fff; }

@media (max-width:720px){
  .hud{ grid-template-columns:1fr; gap:6px; }
  .scoreboard{ justify-content:center; }
  .board{ width:min(88vw, 420px); }
}
